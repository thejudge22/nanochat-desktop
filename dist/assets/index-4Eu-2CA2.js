var Ys=Object.defineProperty;var Dr=e=>{throw TypeError(e)};var Ks=(e,t,n)=>t in e?Ys(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Fe=(e,t,n)=>Ks(e,typeof t!="symbol"?t+"":t,n),Xn=(e,t,n)=>t.has(e)||Dr("Cannot "+n);var u=(e,t,n)=>(Xn(e,t,"read from private field"),n?n.call(e):t.get(e)),B=(e,t,n)=>t.has(e)?Dr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),P=(e,t,n,r)=>(Xn(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),re=(e,t,n)=>(Xn(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const nr=!1;var zn=Array.isArray,Gs=Array.prototype.indexOf,Vn=Array.from,rs=Object.defineProperty,Bt=Object.getOwnPropertyDescriptor,ss=Object.getOwnPropertyDescriptors,Ws=Object.prototype,Js=Array.prototype,mr=Object.getPrototypeOf,Pr=Object.isExtensible;const ct=()=>{};function Qs(e){return e()}function Pn(e){for(var t=0;t<e.length;t++)e[t]()}function as(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const ve=2,yr=4,Yn=8,Xs=1<<24,tt=16,nt=32,Dt=64,Kn=128,Le=512,fe=1024,ye=2048,Oe=4096,Ce=8192,et=16384,br=32768,Wt=65536,Lr=1<<17,is=1<<18,en=1<<19,os=1<<20,Xe=1<<25,jt=32768,rr=1<<21,Er=1<<22,ut=1<<23,xt=Symbol("$state"),Zs=Symbol("legacy props"),ea=Symbol(""),Ht=new class extends Error{constructor(){super(...arguments);Fe(this,"name","StaleReactionError");Fe(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Cr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ta(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function na(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ra(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function sa(e){throw new Error("https://svelte.dev/e/effect_orphan")}function aa(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ia(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function oa(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function la(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function fa(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ca(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ua=1,va=2,ls=4,da=8,ha=16,pa=2,_a=4,ga=8,wa=1,ma=2,de=Symbol(),ya="http://www.w3.org/1999/xhtml";function ba(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function fs(e){return e===this.v}function cs(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function us(e){return!cs(e,this.v)}let tn=!1,Ea=!1;function Ca(){tn=!0}let ee=null;function Jt(e){ee=e}function ht(e,t=!1,n){ee={p:ee,i:!1,c:null,e:null,s:e,x:null,l:tn&&!t?{s:null,u:null,$:[]}:null}}function pt(e){var t=ee,n=t.e;if(n!==null){t.e=null;for(var r of n)Ms(r)}return t.i=!0,ee=t.p,{}}function xn(){return!tn||ee!==null&&ee.l===null}let wt=[];function vs(){var e=wt;wt=[],Pn(e)}function nn(e){if(wt.length===0&&!dn){var t=wt;queueMicrotask(()=>{t===wt&&vs()})}wt.push(e)}function Sa(){for(;wt.length>0;)vs()}function ds(e){var t=K;if(t===null)return F.f|=ut,e;if(t.f&br)Qt(e,t);else{if(!(t.f&Kn))throw e;t.b.error(e)}}function Qt(e,t){for(;t!==null;){if(t.f&Kn)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const jn=new Set;let O=null,zt=null,ae=null,Te=[],Gn=null,sr=!1,dn=!1;var Vt,Yt,mt,yt,En,Kt,Gt,ce,ar,cn,ir,hs,ps;const Hn=class Hn{constructor(){B(this,ce);Fe(this,"committed",!1);Fe(this,"current",new Map);Fe(this,"previous",new Map);B(this,Vt,new Set);B(this,Yt,new Set);B(this,mt,0);B(this,yt,0);B(this,En,null);B(this,Kt,new Set);B(this,Gt,new Set);Fe(this,"skipped_effects",new Set);Fe(this,"is_fork",!1)}is_deferred(){return this.is_fork||u(this,yt)>0}process(t){var r;Te=[],zt=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const s of t)re(this,ce,ar).call(this,s,n);this.is_fork||re(this,ce,hs).call(this),this.is_deferred()?(re(this,ce,cn).call(this,n.effects),re(this,ce,cn).call(this,n.render_effects)):(zt=this,O=null,Or(n.render_effects),Or(n.effects),zt=null,(r=u(this,En))==null||r.resolve()),ae=null}capture(t,n){this.previous.has(t)||this.previous.set(t,n),t.f&ut||(this.current.set(t,t.v),ae==null||ae.set(t,t.v))}activate(){O=this,this.apply()}deactivate(){O===this&&(O=null,ae=null)}flush(){if(this.activate(),Te.length>0){if(_s(),O!==null&&O!==this)return}else u(this,mt)===0&&this.process([]);this.deactivate()}discard(){for(const t of u(this,Yt))t(this);u(this,Yt).clear()}increment(t){P(this,mt,u(this,mt)+1),t&&P(this,yt,u(this,yt)+1)}decrement(t){P(this,mt,u(this,mt)-1),t&&P(this,yt,u(this,yt)-1),this.revive()}revive(){for(const t of u(this,Kt))u(this,Gt).delete(t),ue(t,ye),Nt(t);for(const t of u(this,Gt))ue(t,Oe),Nt(t);this.flush()}oncommit(t){u(this,Vt).add(t)}ondiscard(t){u(this,Yt).add(t)}settled(){var t;return((t=u(this,En))!=null?t:P(this,En,as())).promise}static ensure(){if(O===null){const t=O=new Hn;jn.add(O),dn||Hn.enqueue(()=>{O===t&&t.flush()})}return O}static enqueue(t){nn(t)}apply(){}};Vt=new WeakMap,Yt=new WeakMap,mt=new WeakMap,yt=new WeakMap,En=new WeakMap,Kt=new WeakMap,Gt=new WeakMap,ce=new WeakSet,ar=function(t,n){var c;t.f^=fe;for(var r=t.first;r!==null;){var s=r.f,a=(s&(nt|Dt))!==0,o=a&&(s&fe)!==0,i=o||(s&Ce)!==0||this.skipped_effects.has(r);if(r.f&Kn&&((c=r.b)!=null&&c.is_pending())&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!i&&r.fn!==null){a?r.f^=fe:s&yr?n.effects.push(r):rn(r)&&(r.f&tt&&u(this,Kt).add(r),Zt(r));var l=r.first;if(l!==null){r=l;continue}}var f=r.parent;for(r=r.next;r===null&&f!==null;)f===n.effect&&(re(this,ce,cn).call(this,n.effects),re(this,ce,cn).call(this,n.render_effects),n=n.parent),r=f.next,f=f.parent}},cn=function(t){for(const n of t)n.f&ye?u(this,Kt).add(n):n.f&Oe&&u(this,Gt).add(n),re(this,ce,ir).call(this,n.deps),ue(n,fe)},ir=function(t){if(t!==null)for(const n of t)!(n.f&ve)||!(n.f&jt)||(n.f^=jt,re(this,ce,ir).call(this,n.deps))},hs=function(){if(u(this,yt)===0){for(const t of u(this,Vt))t();u(this,Vt).clear()}u(this,mt)===0&&re(this,ce,ps).call(this)},ps=function(){var a;if(jn.size>1){this.previous.clear();var t=ae,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const o of jn){if(o===this){n=!1;continue}const i=[];for(const[f,c]of this.current){if(o.current.has(f))if(n&&c!==o.current.get(f))o.current.set(f,c);else continue;i.push(f)}if(i.length===0)continue;const l=[...o.current.keys()].filter(f=>!this.current.has(f));if(l.length>0){var s=Te;Te=[];const f=new Set,c=new Map;for(const _ of i)gs(_,l,f,c);if(Te.length>0){O=o,o.apply();for(const _ of Te)re(a=o,ce,ar).call(a,_,r);o.deactivate()}Te=s}}O=null,ae=t}this.committed=!0,jn.delete(this)};let Ze=Hn;function xa(e){var t=dn;dn=!0;try{for(var n;;){if(Sa(),Te.length===0&&(O==null||O.flush(),Te.length===0))return Gn=null,n;_s()}}finally{dn=t}}function _s(){var e=At;sr=!0;var t=null;try{var n=0;for(On(!0);Te.length>0;){var r=Ze.ensure();if(n++>1e3){var s,a;ka()}r.process(Te),vt.clear()}}finally{sr=!1,On(e),Gn=null}}function ka(){try{aa()}catch(e){Qt(e,Gn)}}let Re=null;function Or(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if(!(r.f&(et|Ce))&&rn(r)&&(Re=new Set,Zt(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Ns(r):r.fn=null),(Re==null?void 0:Re.size)>0)){vt.clear();for(const s of Re){if(s.f&(et|Ce))continue;const a=[s];let o=s.parent;for(;o!==null;)Re.has(o)&&(Re.delete(o),a.push(o)),o=o.parent;for(let i=a.length-1;i>=0;i--){const l=a[i];l.f&(et|Ce)||Zt(l)}}Re.clear()}}Re=null}}function gs(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const a=s.f;a&ve?gs(s,t,n,r):a&(Er|tt)&&!(a&ye)&&ws(s,t,r)&&(ue(s,ye),Nt(s))}}function ws(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if(s.f&ve&&ws(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function Nt(e){for(var t=Gn=e;t.parent!==null;){t=t.parent;var n=t.f;if(sr&&t===K&&n&tt&&!(n&is))return;if(n&(Dt|nt)){if(!(n&fe))return;t.f^=fe}}Te.push(t)}function Aa(e){let t=0,n=$t(0),r;return()=>{_n()&&(v(n),An(()=>(t===0&&(r=I(()=>e(()=>hn(n)))),t+=1,()=>{nn(()=>{t-=1,t===0&&(r==null||r(),r=void 0,hn(n))})})))}}var Ma=Wt|en|Kn;function Ta(e,t,n){new Ia(e,t,n)}var ke,Ae,wr,qe,bt,He,Me,ge,Ue,Qe,ot,Et,lt,Ct,ft,Un,le,ja,Na,or,Rn,Dn,lr;class Ia{constructor(t,n,r){B(this,le);Fe(this,"parent");B(this,ke,!1);B(this,Ae);B(this,wr,null);B(this,qe);B(this,bt);B(this,He);B(this,Me,null);B(this,ge,null);B(this,Ue,null);B(this,Qe,null);B(this,ot,null);B(this,Et,0);B(this,lt,0);B(this,Ct,!1);B(this,ft,null);B(this,Un,Aa(()=>(P(this,ft,$t(u(this,Et))),()=>{P(this,ft,null)})));P(this,Ae,t),P(this,qe,n),P(this,bt,r),this.parent=K.b,P(this,ke,!!u(this,qe).pending),P(this,He,Tr(()=>{K.b=this;{var s=re(this,le,or).call(this);try{P(this,Me,Ie(()=>r(s)))}catch(a){this.error(a)}u(this,lt)>0?re(this,le,Dn).call(this):P(this,ke,!1)}return()=>{var a;(a=u(this,ot))==null||a.remove()}},Ma))}is_pending(){return u(this,ke)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!u(this,qe).pending}update_pending_count(t){re(this,le,lr).call(this,t),P(this,Et,u(this,Et)+t),u(this,ft)&&Xt(u(this,ft),u(this,Et))}get_effect_pending(){return u(this,Un).call(this),v(u(this,ft))}error(t){var n=u(this,qe).onerror;let r=u(this,qe).failed;if(u(this,Ct)||!n&&!r)throw t;u(this,Me)&&(me(u(this,Me)),P(this,Me,null)),u(this,ge)&&(me(u(this,ge)),P(this,ge,null)),u(this,Ue)&&(me(u(this,Ue)),P(this,Ue,null));var s=!1,a=!1;const o=()=>{if(s){ba();return}s=!0,a&&ca(),Ze.ensure(),P(this,Et,0),u(this,Ue)!==null&&kt(u(this,Ue),()=>{P(this,Ue,null)}),P(this,ke,this.has_pending_snippet()),P(this,Me,re(this,le,Rn).call(this,()=>(P(this,Ct,!1),Ie(()=>u(this,bt).call(this,u(this,Ae)))))),u(this,lt)>0?re(this,le,Dn).call(this):P(this,ke,!1)};var i=F;try{we(null),a=!0,n==null||n(t,o),a=!1}catch(l){Qt(l,u(this,He)&&u(this,He).parent)}finally{we(i)}r&&nn(()=>{P(this,Ue,re(this,le,Rn).call(this,()=>{Ze.ensure(),P(this,Ct,!0);try{return Ie(()=>{r(u(this,Ae),()=>t,()=>o)})}catch(l){return Qt(l,u(this,He).parent),null}finally{P(this,Ct,!1)}}))})}}ke=new WeakMap,Ae=new WeakMap,wr=new WeakMap,qe=new WeakMap,bt=new WeakMap,He=new WeakMap,Me=new WeakMap,ge=new WeakMap,Ue=new WeakMap,Qe=new WeakMap,ot=new WeakMap,Et=new WeakMap,lt=new WeakMap,Ct=new WeakMap,ft=new WeakMap,Un=new WeakMap,le=new WeakSet,ja=function(){try{P(this,Me,Ie(()=>u(this,bt).call(this,u(this,Ae))))}catch(t){this.error(t)}P(this,ke,!1)},Na=function(){const t=u(this,qe).pending;t&&(P(this,ge,Ie(()=>t(u(this,Ae)))),Ze.enqueue(()=>{var n=re(this,le,or).call(this);P(this,Me,re(this,le,Rn).call(this,()=>(Ze.ensure(),Ie(()=>u(this,bt).call(this,n))))),u(this,lt)>0?re(this,le,Dn).call(this):(kt(u(this,ge),()=>{P(this,ge,null)}),P(this,ke,!1))}))},or=function(){var t=u(this,Ae);return u(this,ke)&&(P(this,ot,dt()),u(this,Ae).before(u(this,ot)),t=u(this,ot)),t},Rn=function(t){var n=K,r=F,s=ee;Ke(u(this,He)),we(u(this,He)),Jt(u(this,He).ctx);try{return t()}catch(a){return ds(a),null}finally{Ke(n),we(r),Jt(s)}},Dn=function(){const t=u(this,qe).pending;u(this,Me)!==null&&(P(this,Qe,document.createDocumentFragment()),u(this,Qe).append(u(this,ot)),Ds(u(this,Me),u(this,Qe))),u(this,ge)===null&&P(this,ge,Ie(()=>t(u(this,Ae))))},lr=function(t){var n;if(!this.has_pending_snippet()){this.parent&&re(n=this.parent,le,lr).call(n,t);return}P(this,lt,u(this,lt)+t),u(this,lt)===0&&(P(this,ke,!1),u(this,ge)&&kt(u(this,ge),()=>{P(this,ge,null)}),u(this,Qe)&&(u(this,Ae).before(u(this,Qe)),P(this,Qe,null)))};function $a(e,t,n,r){const s=xn()?Sr:xr;if(n.length===0&&e.length===0){r(t.map(s));return}var a=O,o=K,i=Ra();function l(){Promise.all(n.map(f=>Da(f))).then(f=>{i();try{r([...t.map(s),...f])}catch(c){o.f&et||Qt(c,o)}a==null||a.deactivate(),Ln()}).catch(f=>{Qt(f,o)})}e.length>0?Promise.all(e).then(()=>{i();try{return l()}finally{a==null||a.deactivate(),Ln()}}):l()}function Ra(){var e=K,t=F,n=ee,r=O;return function(a=!0){Ke(e),we(t),Jt(n),a&&(r==null||r.activate())}}function Ln(){Ke(null),we(null),Jt(null)}function Sr(e){var t=ve|ye,n=F!==null&&F.f&ve?F:null;return K!==null&&(K.f|=en),{ctx:ee,deps:null,effects:null,equals:fs,f:t,fn:e,reactions:null,rv:0,v:de,wv:0,parent:n!=null?n:K,ac:null}}function Da(e,t){let n=K;n===null&&ta();var r=n.b,s=void 0,a=$t(de),o=!F,i=new Map;return Ya(()=>{var g;var l=as();s=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{f===O&&f.committed&&f.deactivate(),Ln()})}catch(d){l.reject(d),Ln()}var f=O;if(o){var c=!r.is_pending();r.update_pending_count(1),f.increment(c),(g=i.get(f))==null||g.reject(Ht),i.delete(f),i.set(f,l)}const _=(d,b=void 0)=>{if(f.activate(),b)b!==Ht&&(a.f|=ut,Xt(a,b));else{a.f&ut&&(a.f^=ut),Xt(a,d);for(const[A,p]of i){if(i.delete(A),A===f)break;p.reject(Ht)}}o&&(r.update_pending_count(-1),f.decrement(c))};l.promise.then(_,d=>_(null,d||"unknown"))}),Ar(()=>{for(const l of i.values())l.reject(Ht)}),new Promise(l=>{function f(c){function _(){c===s?l(a):f(s)}c.then(_,_)}f(s)})}function xr(e){const t=Sr(e);return t.equals=us,t}function ms(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)me(t[n])}}function Pa(e){for(var t=e.parent;t!==null;){if(!(t.f&ve))return t.f&et?null:t;t=t.parent}return null}function kr(e){var t,n=K;Ke(Pa(e));try{e.f&=~jt,ms(e),t=Fs(e)}finally{Ke(n)}return t}function ys(e){var t=kr(e);if(e.equals(t)||(O!=null&&O.is_fork||(e.v=t),e.wv=Ls()),!Pt)if(ae!==null)(_n()||O!=null&&O.is_fork)&&ae.set(e,t);else{var n=e.f&Le?fe:Oe;ue(e,n)}}let fr=new Set;const vt=new Map;let bs=!1;function $t(e,t){var n={f:0,v:e,reactions:null,equals:fs,rv:0,wv:0};return n}function st(e,t){const n=$t(e);return Ga(n),n}function ie(e,t=!1,n=!0){var s,a;const r=$t(e);return t||(r.equals=us),tn&&n&&ee!==null&&ee.l!==null&&((a=(s=ee.l).s)!=null?a:s.s=[]).push(r),r}function cr(e,t){return N(e,I(()=>v(e))),t}function N(e,t,n=!1){F!==null&&(!Ve||F.f&Lr)&&xn()&&F.f&(ve|tt|Er|Lr)&&!(_e!=null&&_e.includes(e))&&fa();let r=n?Ut(t):t;return Xt(e,r)}function Xt(e,t){if(!e.equals(t)){var n=e.v;Pt?vt.set(e,t):vt.set(e,n),e.v=t;var r=Ze.ensure();r.capture(e,n),e.f&ve&&(e.f&ye&&kr(e),ue(e,e.f&Le?fe:Oe)),e.wv=Ls(),Es(e,ye),xn()&&K!==null&&K.f&fe&&!(K.f&(nt|Dt))&&(xe===null?Wa([e]):xe.push(e)),!r.is_fork&&fr.size>0&&!bs&&La()}return t}function La(){bs=!1;var e=At;On(!0);const t=Array.from(fr);try{for(const n of t)n.f&fe&&ue(n,Oe),rn(n)&&Zt(n)}finally{On(e)}fr.clear()}function hn(e){N(e,e.v+1)}function Es(e,t){var n=e.reactions;if(n!==null)for(var r=xn(),s=n.length,a=0;a<s;a++){var o=n[a],i=o.f;if(!(!r&&o===K)){var l=(i&ye)===0;if(l&&ue(o,t),i&ve){var f=o;ae==null||ae.delete(f),i&jt||(i&Le&&(o.f|=jt),Es(f,Oe))}else l&&(i&tt&&Re!==null&&Re.add(o),Nt(o))}}}function Ut(e){if(typeof e!="object"||e===null||xt in e)return e;const t=mr(e);if(t!==Ws&&t!==Js)return e;var n=new Map,r=zn(e),s=st(0),a=Mt,o=i=>{if(Mt===a)return i();var l=F,f=Mt;we(null),Hr(a);var c=i();return we(l),Hr(f),c};return r&&n.set("length",st(e.length)),new Proxy(e,{defineProperty(i,l,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&oa();var c=n.get(l);return c===void 0?c=o(()=>{var _=st(f.value);return n.set(l,_),_}):N(c,f.value,!0),!0},deleteProperty(i,l){var f=n.get(l);if(f===void 0){if(l in i){const c=o(()=>st(de));n.set(l,c),hn(s)}}else N(f,de),hn(s);return!0},get(i,l,f){var d;if(l===xt)return e;var c=n.get(l),_=l in i;if(c===void 0&&(!_||(d=Bt(i,l))!=null&&d.writable)&&(c=o(()=>{var b=Ut(_?i[l]:de),A=st(b);return A}),n.set(l,c)),c!==void 0){var g=v(c);return g===de?void 0:g}return Reflect.get(i,l,f)},getOwnPropertyDescriptor(i,l){var f=Reflect.getOwnPropertyDescriptor(i,l);if(f&&"value"in f){var c=n.get(l);c&&(f.value=v(c))}else if(f===void 0){var _=n.get(l),g=_==null?void 0:_.v;if(_!==void 0&&g!==de)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return f},has(i,l){var g;if(l===xt)return!0;var f=n.get(l),c=f!==void 0&&f.v!==de||Reflect.has(i,l);if(f!==void 0||K!==null&&(!c||(g=Bt(i,l))!=null&&g.writable)){f===void 0&&(f=o(()=>{var d=c?Ut(i[l]):de,b=st(d);return b}),n.set(l,f));var _=v(f);if(_===de)return!1}return c},set(i,l,f,c){var q;var _=n.get(l),g=l in i;if(r&&l==="length")for(var d=f;d<_.v;d+=1){var b=n.get(d+"");b!==void 0?N(b,de):d in i&&(b=o(()=>st(de)),n.set(d+"",b))}if(_===void 0)(!g||(q=Bt(i,l))!=null&&q.writable)&&(_=o(()=>st(void 0)),N(_,Ut(f)),n.set(l,_));else{g=_.v!==de;var A=o(()=>Ut(f));N(_,A)}var p=Reflect.getOwnPropertyDescriptor(i,l);if(p!=null&&p.set&&p.set.call(c,f),!g){if(r&&typeof l=="string"){var m=n.get("length"),z=Number(l);Number.isInteger(z)&&z>=m.v&&N(m,z+1)}hn(s)}return!0},ownKeys(i){v(s);var l=Reflect.ownKeys(i).filter(_=>{var g=n.get(_);return g===void 0||g.v!==de});for(var[f,c]of n)c.v!==de&&!(f in i)&&l.push(f);return l},setPrototypeOf(){la()}})}var ur,Cs,Ss,xs;function Oa(){if(ur===void 0){ur=window,Cs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Ss=Bt(t,"firstChild").get,xs=Bt(t,"nextSibling").get,Pr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Pr(n)&&(n.__t=void 0)}}function dt(e=""){return document.createTextNode(e)}function ze(e){return Ss.call(e)}function kn(e){return xs.call(e)}function w(e,t){return ze(e)}function Ye(e,t=!1){{var n=ze(e);return n instanceof Comment&&n.data===""?kn(n):n}}function k(e,t=1,n=!1){let r=e;for(;t--;)r=kn(r);return r}function Fa(e){e.textContent=""}function ks(){return!1}let Fr=!1;function qa(){Fr||(Fr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Wn(e){var t=F,n=K;we(null),Ke(null);try{return e()}finally{we(t),Ke(n)}}function Ha(e,t,n,r=n){e.addEventListener(t,()=>Wn(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),qa()}function As(e){K===null&&(F===null&&sa(),ra()),Pt&&na()}function Ua(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ge(e,t,n){var i;var r=K;r!==null&&r.f&Ce&&(e|=Ce);var s={ctx:ee,deps:null,nodes:null,f:e|ye|Le,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{Zt(s),s.f|=br}catch(l){throw me(s),l}else t!==null&&Nt(s);var a=s;if(n&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&!(a.f&en)&&(a=a.first,e&tt&&e&Wt&&a!==null&&(a.f|=Wt)),a!==null&&(a.parent=r,r!==null&&Ua(a,r),F!==null&&F.f&ve&&!(e&Dt))){var o=F;((i=o.effects)!=null?i:o.effects=[]).push(a)}return s}function _n(){return F!==null&&!Ve}function Ar(e){const t=Ge(Yn,null,!1);return ue(t,fe),t.teardown=e,t}function vr(e){var s;As();var t=K.f,n=!F&&(t&nt)!==0&&(t&br)===0;if(n){var r=ee;((s=r.e)!=null?s:r.e=[]).push(e)}else return Ms(e)}function Ms(e){return Ge(yr|os,e,!1)}function Ba(e){return As(),Ge(Yn|os,e,!0)}function za(e){Ze.ensure();const t=Ge(Dt|en,e,!0);return(n={})=>new Promise(r=>{n.outro?kt(t,()=>{me(t),r(void 0)}):(me(t),r(void 0))})}function Va(e){return Ge(yr,e,!1)}function gn(e,t){var n=ee,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=An(()=>{e(),!r.ran&&(r.ran=!0,I(t))})}function Mr(){var e=ee;An(()=>{for(var t of e.l.$){t.deps();var n=t.effect;n.f&fe&&ue(n,Oe),rn(n)&&Zt(n),t.ran=!1}})}function Ya(e){return Ge(Er|en,e,!0)}function An(e,t=0){return Ge(Yn|t,e,!0)}function se(e,t=[],n=[],r=[]){$a(r,t,n,s=>{Ge(Yn,()=>e(...s.map(v)),!0)})}function Tr(e,t=0){var n=Ge(tt|t,e,!0);return n}function Ie(e){return Ge(nt|en,e,!0)}function Ts(e){var t=e.teardown;if(t!==null){const n=Pt,r=F;qr(!0),we(null);try{t.call(null)}finally{qr(n),we(r)}}}function Is(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&Wn(()=>{s.abort(Ht)});var r=n.next;n.f&Dt?n.parent=null:me(n,t),n=r}}function Ka(e){for(var t=e.first;t!==null;){var n=t.next;t.f&nt||me(t),t=n}}function me(e,t=!0){var n=!1;(t||e.f&is)&&e.nodes!==null&&e.nodes.end!==null&&(js(e.nodes.start,e.nodes.end),n=!0),Is(e,t&&!n),Fn(e,0),ue(e,et);var r=e.nodes&&e.nodes.t;if(r!==null)for(const a of r)a.stop();Ts(e);var s=e.parent;s!==null&&s.first!==null&&Ns(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function js(e,t){for(;e!==null;){var n=e===t?null:kn(e);e.remove(),e=n}}function Ns(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function kt(e,t,n=!0){var r=[];$s(e,r,!0);var s=()=>{n&&me(e),t&&t()},a=r.length;if(a>0){var o=()=>--a||s();for(var i of r)i.out(o)}else s()}function $s(e,t,n){if(!(e.f&Ce)){e.f^=Ce;var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)(i.is_global||n)&&t.push(i);for(var s=e.first;s!==null;){var a=s.next,o=(s.f&Wt)!==0||(s.f&nt)!==0&&(e.f&tt)!==0;$s(s,t,o?n:!1),s=a}}}function Ir(e){Rs(e,!0)}function Rs(e,t){if(e.f&Ce){e.f^=Ce,e.f&fe||(ue(e,ye),Nt(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Wt)!==0||(n.f&nt)!==0;Rs(n,s?t:!1),n=r}var a=e.nodes&&e.nodes.t;if(a!==null)for(const o of a)(o.is_global||t)&&o.in()}}function Ds(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var s=n===r?null:kn(n);t.append(n),n=s}}let At=!1;function On(e){At=e}let Pt=!1;function qr(e){Pt=e}let F=null,Ve=!1;function we(e){F=e}let K=null;function Ke(e){K=e}let _e=null;function Ga(e){F!==null&&(_e===null?_e=[e]:_e.push(e))}let pe=null,be=0,xe=null;function Wa(e){xe=e}let Ps=1,wn=0,Mt=wn;function Hr(e){Mt=e}function Ls(){return++Ps}function rn(e){var t=e.f;if(t&ye)return!0;if(t&ve&&(e.f&=~jt),t&Oe){var n=e.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var a=n[s];if(rn(a)&&ys(a),a.wv>e.wv)return!0}t&Le&&ae===null&&ue(e,fe)}return!1}function Os(e,t,n=!0){var r=e.reactions;if(r!==null&&!(_e!=null&&_e.includes(e)))for(var s=0;s<r.length;s++){var a=r[s];a.f&ve?Os(a,t,!1):t===a&&(n?ue(a,ye):a.f&fe&&ue(a,Oe),Nt(a))}}function Fs(e){var b,A;var t=pe,n=be,r=xe,s=F,a=_e,o=ee,i=Ve,l=Mt,f=e.f;pe=null,be=0,xe=null,F=f&(nt|Dt)?null:e,_e=null,Jt(e.ctx),Ve=!1,Mt=++wn,e.ac!==null&&(Wn(()=>{e.ac.abort(Ht)}),e.ac=null);try{e.f|=rr;var c=e.fn,_=c(),g=e.deps;if(pe!==null){var d;if(Fn(e,be),g!==null&&be>0)for(g.length=be+pe.length,d=0;d<pe.length;d++)g[be+d]=pe[d];else e.deps=g=pe;if(_n()&&e.f&Le)for(d=be;d<g.length;d++)((A=(b=g[d]).reactions)!=null?A:b.reactions=[]).push(e)}else g!==null&&be<g.length&&(Fn(e,be),g.length=be);if(xn()&&xe!==null&&!Ve&&g!==null&&!(e.f&(ve|Oe|ye)))for(d=0;d<xe.length;d++)Os(xe[d],e);return s!==null&&s!==e&&(wn++,xe!==null&&(r===null?r=xe:r.push(...xe))),e.f&ut&&(e.f^=ut),_}catch(p){return ds(p)}finally{e.f^=rr,pe=t,be=n,xe=r,F=s,_e=a,Jt(o),Ve=i,Mt=l}}function Ja(e,t){let n=t.reactions;if(n!==null){var r=Gs.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&t.f&ve&&(pe===null||!pe.includes(t))&&(ue(t,Oe),t.f&Le&&(t.f^=Le,t.f&=~jt),ms(t),Fn(t,0))}function Fn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Ja(e,n[r])}function Zt(e){var t=e.f;if(!(t&et)){ue(e,fe);var n=K,r=At;K=e,At=!0;try{t&(tt|Xs)?Ka(e):Is(e),Ts(e);var s=Fs(e);e.teardown=typeof s=="function"?s:null,e.wv=Ps;var a;nr&&Ea&&e.f&ye&&e.deps}finally{At=r,K=n}}}async function qs(){await Promise.resolve(),xa()}function v(e){var l;var t=e.f,n=(t&ve)!==0;if(F!==null&&!Ve){var r=K!==null&&(K.f&et)!==0;if(!r&&!(_e!=null&&_e.includes(e))){var s=F.deps;if(F.f&rr)e.rv<wn&&(e.rv=wn,pe===null&&s!==null&&s[be]===e?be++:pe===null?pe=[e]:pe.includes(e)||pe.push(e));else{((l=F.deps)!=null?l:F.deps=[]).push(e);var a=e.reactions;a===null?e.reactions=[F]:a.includes(F)||a.push(F)}}}if(Pt){if(vt.has(e))return vt.get(e);if(n){var o=e,i=o.v;return(!(o.f&fe)&&o.reactions!==null||Us(o))&&(i=kr(o)),vt.set(o,i),i}}else n&&(!(ae!=null&&ae.has(e))||O!=null&&O.is_fork&&!_n())&&(o=e,rn(o)&&ys(o),At&&_n()&&!(o.f&Le)&&Hs(o));if(ae!=null&&ae.has(e))return ae.get(e);if(e.f&ut)throw e.v;return e.v}function Hs(e){var t;if(e.deps!==null){e.f^=Le;for(const n of e.deps)((t=n.reactions)!=null?t:n.reactions=[]).push(e),n.f&ve&&!(n.f&Le)&&Hs(n)}}function Us(e){if(e.v===de)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(vt.has(t)||t.f&ve&&Us(t))return!0;return!1}function I(e){var t=Ve;try{return Ve=!0,e()}finally{Ve=t}}const Qa=-7169;function ue(e,t){e.f=e.f&Qa|t}function he(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(xt in e)dr(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&xt in n&&dr(n)}}}function dr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{dr(e[r],t)}catch{}const n=mr(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=ss(n);for(let s in r){const a=r[s].get;if(a)try{a.call(e)}catch{}}}}}const Xa=["touchstart","touchmove"];function Za(e){return Xa.includes(e)}const ei=new Set,Ur=new Set;function ti(e,t,n,r={}){function s(a){if(r.capture||un.call(t,a),!a.cancelBubble)return Wn(()=>n==null?void 0:n.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?nn(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function Z(e,t,n,r,s){var a={capture:r,passive:s},o=ti(e,t,n,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Ar(()=>{t.removeEventListener(e,o,a)})}let Br=null;function un(e){var p;var t=this,n=t.ownerDocument,r=e.type,s=((p=e.composedPath)==null?void 0:p.call(e))||[],a=s[0]||e.target;Br=e;var o=0,i=Br===e&&e.__root;if(i){var l=s.indexOf(i);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var f=s.indexOf(t);if(f===-1)return;l<=f&&(o=l)}if(a=s[o]||e.target,a!==t){rs(e,"currentTarget",{configurable:!0,get(){return a||n}});var c=F,_=K;we(null),Ke(null);try{for(var g,d=[];a!==null;){var b=a.assignedSlot||a.parentNode||a.host||null;try{var A=a["__"+r];A!=null&&(!a.disabled||e.target===a)&&A.call(a,e)}catch(m){g?d.push(m):g=m}if(e.cancelBubble||b===t||b===null)break;a=b}if(g){for(let m of d)queueMicrotask(()=>{throw m});throw g}}finally{e.__root=t,delete e.currentTarget,we(c),Ke(_)}}}function jr(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function mn(e,t){var n=K;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function $(e,t){var n=(t&wa)!==0,r=(t&ma)!==0,s,a=!e.startsWith("<!>");return()=>{s===void 0&&(s=jr(a?e:"<!>"+e),n||(s=ze(s)));var o=r||Cs?document.importNode(s,!0):s.cloneNode(!0);if(n){var i=ze(o),l=o.lastChild;mn(i,l)}else mn(o,o);return o}}function ni(e,t,n="svg"){var r=!e.startsWith("<!>"),s=`<${n}>${r?e:"<!>"+e}</${n}>`,a;return()=>{if(!a){var o=jr(s),i=ze(o);a=ze(i)}var l=a.cloneNode(!0);return mn(l,l),l}}function Bs(e,t){return ni(e,t,"svg")}function Rt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=dt();return e.append(t,n),mn(t,n),e}function x(e,t){e!==null&&e.before(t)}function te(e,t){var r;var n=t==null?"":typeof t=="object"?t+"":t;n!==((r=e.__t)!=null?r:e.__t=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function ri(e,t){return si(e,t)}const Ot=new Map;function si(e,{target:t,anchor:n,props:r={},events:s,context:a,intro:o=!0}){Oa();var i=new Set,l=_=>{for(var g=0;g<_.length;g++){var d=_[g];if(!i.has(d)){i.add(d);var b=Za(d);t.addEventListener(d,un,{passive:b});var A=Ot.get(d);A===void 0?(document.addEventListener(d,un,{passive:b}),Ot.set(d,1)):Ot.set(d,A+1)}}};l(Vn(ei)),Ur.add(l);var f=void 0,c=za(()=>{var _=n!=null?n:t.appendChild(dt());return Ta(_,{pending:()=>{}},g=>{if(a){ht({});var d=ee;d.c=a}s&&(r.$$events=s),f=e(g,r)||{},a&&pt()}),()=>{var b;for(var g of i){t.removeEventListener(g,un);var d=Ot.get(g);--d===0?(document.removeEventListener(g,un),Ot.delete(g)):Ot.set(g,d)}Ur.delete(l),_!==n&&((b=_.parentNode)==null||b.removeChild(_))}});return ai.set(f,c),f}let ai=new WeakMap;var De,Be,Ee,St,Cn,Sn,Bn;class ii{constructor(t,n=!0){Fe(this,"anchor");B(this,De,new Map);B(this,Be,new Map);B(this,Ee,new Map);B(this,St,new Set);B(this,Cn,!0);B(this,Sn,()=>{var t=O;if(u(this,De).has(t)){var n=u(this,De).get(t),r=u(this,Be).get(n);if(r)Ir(r),u(this,St).delete(n);else{var s=u(this,Ee).get(n);s&&(u(this,Be).set(n,s.effect),u(this,Ee).delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[a,o]of u(this,De)){if(u(this,De).delete(a),a===t)break;const i=u(this,Ee).get(o);i&&(me(i.effect),u(this,Ee).delete(o))}for(const[a,o]of u(this,Be)){if(a===n||u(this,St).has(a))continue;const i=()=>{if(Array.from(u(this,De).values()).includes(a)){var f=document.createDocumentFragment();Ds(o,f),f.append(dt()),u(this,Ee).set(a,{effect:o,fragment:f})}else me(o);u(this,St).delete(a),u(this,Be).delete(a)};u(this,Cn)||!r?(u(this,St).add(a),kt(o,i,!1)):i()}}});B(this,Bn,t=>{u(this,De).delete(t);const n=Array.from(u(this,De).values());for(const[r,s]of u(this,Ee))n.includes(r)||(me(s.effect),u(this,Ee).delete(r))});this.anchor=t,P(this,Cn,n)}ensure(t,n){var r=O,s=ks();if(n&&!u(this,Be).has(t)&&!u(this,Ee).has(t))if(s){var a=document.createDocumentFragment(),o=dt();a.append(o),u(this,Ee).set(t,{effect:Ie(()=>n(o)),fragment:a})}else u(this,Be).set(t,Ie(()=>n(this.anchor)));if(u(this,De).set(r,t),s){for(const[i,l]of u(this,Be))i===t?r.skipped_effects.delete(l):r.skipped_effects.add(l);for(const[i,l]of u(this,Ee))i===t?r.skipped_effects.delete(l.effect):r.skipped_effects.add(l.effect);r.oncommit(u(this,Sn)),r.ondiscard(u(this,Bn))}else u(this,Sn).call(this)}}De=new WeakMap,Be=new WeakMap,Ee=new WeakMap,St=new WeakMap,Cn=new WeakMap,Sn=new WeakMap,Bn=new WeakMap;function Y(e,t,n=!1){var r=new ii(e),s=n?Wt:0;function a(o,i){r.ensure(o,i)}Tr(()=>{var o=!1;t((i,l=!0)=>{o=!0,a(l,i)}),o||a(!1,null)},s)}function zr(e,t){return t}function oi(e,t,n){var _;for(var r=[],s=t.length,a,o=t.length,i=0;i<s;i++){let g=t[i];kt(g,()=>{if(a){if(a.pending.delete(g),a.done.add(g),a.pending.size===0){var d=e.outrogroups;hr(Vn(a.done)),d.delete(a),d.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var l=r.length===0&&n!==null;if(l){var f=n,c=f.parentNode;Fa(c),c.append(f),e.items.clear()}hr(t,!l)}else a={pending:new Set(t),done:new Set},((_=e.outrogroups)!=null?_:e.outrogroups=new Set).add(a)}function hr(e,t=!0){for(var n=0;n<e.length;n++)me(e[n],t)}var Ft;function yn(e,t,n,r,s,a=null){var o=e,i=new Map,l=(t&ls)!==0;if(l){var f=e;o=f.appendChild(dt())}var c=null,_=xr(()=>{var m=n();return zn(m)?m:m==null?[]:Vn(m)}),g,d=!0;function b(){p.fallback=c,li(p,g,o,t,r),c!==null&&(g.length===0?c.f&Xe?(c.f^=Xe,vn(c,null,o)):Ir(c):kt(c,()=>{c=null}))}var A=Tr(()=>{g=v(_);for(var m=g.length,z=new Set,q=O,j=ks(),G=0;G<m;G+=1){var H=g[G],M=r(H,G),h=d?null:i.get(M);h?(h.v&&Xt(h.v,H),h.i&&Xt(h.i,G),j&&q.skipped_effects.delete(h.e)):(h=fi(i,d?o:Ft!=null?Ft:Ft=dt(),H,M,G,s,t,n),d||(h.e.f|=Xe),i.set(M,h)),z.add(M)}if(m===0&&a&&!c&&(d?c=Ie(()=>a(o)):(c=Ie(()=>a(Ft!=null?Ft:Ft=dt())),c.f|=Xe)),!d)if(j){for(const[E,C]of i)z.has(E)||q.skipped_effects.add(C.e);q.oncommit(b),q.ondiscard(()=>{})}else b();v(_)}),p={effect:A,items:i,outrogroups:null,fallback:c};d=!1}function li(e,t,n,r,s){var C,R,y,S,D,L,Q,V,X;var a=(r&da)!==0,o=t.length,i=e.items,l=e.effect.first,f,c=null,_,g=[],d=[],b,A,p,m;if(a)for(m=0;m<o;m+=1)b=t[m],A=s(b,m),p=i.get(A).e,p.f&Xe||((R=(C=p.nodes)==null?void 0:C.a)==null||R.measure(),(_!=null?_:_=new Set).add(p));for(m=0;m<o;m+=1){if(b=t[m],A=s(b,m),p=i.get(A).e,e.outrogroups!==null)for(const W of e.outrogroups)W.pending.delete(p),W.done.delete(p);if(p.f&Xe)if(p.f^=Xe,p===l)vn(p,null,n);else{var z=c?c.next:l;p===e.effect.last&&(e.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),at(e,c,p),at(e,p,z),vn(p,z,n),c=p,g=[],d=[],l=c.next;continue}if(p.f&Ce&&(Ir(p),a&&((S=(y=p.nodes)==null?void 0:y.a)==null||S.unfix(),(_!=null?_:_=new Set).delete(p))),p!==l){if(f!==void 0&&f.has(p)){if(g.length<d.length){var q=d[0],j;c=q.prev;var G=g[0],H=g[g.length-1];for(j=0;j<g.length;j+=1)vn(g[j],q,n);for(j=0;j<d.length;j+=1)f.delete(d[j]);at(e,G.prev,H.next),at(e,c,G),at(e,H,q),l=q,c=H,m-=1,g=[],d=[]}else f.delete(p),vn(p,l,n),at(e,p.prev,p.next),at(e,p,c===null?e.effect.first:c.next),at(e,c,p),c=p;continue}for(g=[],d=[];l!==null&&l!==p;)(f!=null?f:f=new Set).add(l),d.push(l),l=l.next;if(l===null)continue}p.f&Xe||g.push(p),c=p,l=p.next}if(e.outrogroups!==null){for(const W of e.outrogroups)W.pending.size===0&&(hr(Vn(W.done)),(D=e.outrogroups)==null||D.delete(W));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||f!==void 0){var M=[];if(f!==void 0)for(p of f)p.f&Ce||M.push(p);for(;l!==null;)!(l.f&Ce)&&l!==e.fallback&&M.push(l),l=l.next;var h=M.length;if(h>0){var E=r&ls&&o===0?n:null;if(a){for(m=0;m<h;m+=1)(Q=(L=M[m].nodes)==null?void 0:L.a)==null||Q.measure();for(m=0;m<h;m+=1)(X=(V=M[m].nodes)==null?void 0:V.a)==null||X.fix()}oi(e,M,E)}}a&&nn(()=>{var W,T;if(_!==void 0)for(p of _)(T=(W=p.nodes)==null?void 0:W.a)==null||T.apply()})}function fi(e,t,n,r,s,a,o,i){var l=o&ua?o&ha?$t(n):ie(n,!1,!1):null,f=o&va?$t(s):null;return{v:l,i:f,e:Ie(()=>(a(t,l!=null?l:n,f!=null?f:s,i),()=>{e.delete(r)}))}}function vn(e,t,n){if(e.nodes)for(var r=e.nodes.start,s=e.nodes.end,a=t&&!(t.f&Xe)?t.nodes.start:n;r!==null;){var o=kn(r);if(a.before(r),r===s)return;r=o}}function at(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function ci(e,t,n=!1,r=!1,s=!1){var a=e,o="";se(()=>{var c;var i=K;if(o!==(o=(c=t())!=null?c:"")&&(i.nodes!==null&&(js(i.nodes.start,i.nodes.end),i.nodes=null),o!=="")){var l=o+"";n?l=`<svg>${l}</svg>`:r&&(l=`<math>${l}</math>`);var f=jr(l);if((n||r)&&(f=ze(f)),mn(ze(f),f.lastChild),n||r)for(;ze(f);)a.before(ze(f));else a.before(f)}})}const Vr=[...` 	
\r\fÂ \v\uFEFF`];function ui(e,t,n){var r=e==null?"":""+e;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var a=s.length,o=0;(o=r.indexOf(s,o))>=0;){var i=o+a;(o===0||Vr.includes(r[o-1]))&&(i===r.length||Vr.includes(r[i]))?r=(o===0?"":r.substring(0,o))+r.substring(i+1):o=i}}return r===""?null:r}function Tt(e,t,n,r,s,a){var o=e.__className;if(o!==n||o===void 0){var i=ui(n,r,a);i==null?e.removeAttribute("class"):t?e.className=i:e.setAttribute("class",i),e.__className=n}else if(a&&s!==a)for(var l in a){var f=!!a[l];(s==null||f!==!!s[l])&&e.classList.toggle(l,f)}return a}const vi=Symbol("is custom element"),di=Symbol("is html");function It(e,t,n,r){var s=hi(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[ea]=n),n==null?e.removeAttribute(t):typeof n!="string"&&pi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function hi(e){var t;return(t=e.__attributes)!=null?t:e.__attributes={[vi]:e.nodeName.includes("-"),[di]:e.namespaceURI===ya}}var Yr=new Map;function pi(e){var t=e.getAttribute("is")||e.nodeName,n=Yr.get(t);if(n)return n;Yr.set(t,n=[]);for(var r,s=e,a=Element.prototype;a!==s;){r=ss(s);for(var o in r)r[o].set&&n.push(o);s=mr(s)}return n}function pr(e,t,n=t){var r=new WeakSet;Ha(e,"input",async s=>{var a=s?e.defaultValue:e.value;if(a=Zn(e)?er(a):a,n(a),O!==null&&r.add(O),await qs(),a!==(a=t())){var o=e.selectionStart,i=e.selectionEnd,l=e.value.length;if(e.value=a!=null?a:"",i!==null){var f=e.value.length;o===i&&i===l&&f>l?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=o,e.selectionEnd=Math.min(i,f))}}}),I(t)==null&&e.value&&(n(Zn(e)?er(e.value):e.value),O!==null&&r.add(O)),An(()=>{var s=t();if(e===document.activeElement){var a=zt!=null?zt:O;if(r.has(a))return}Zn(e)&&s===er(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s!=null?s:"")})}function Zn(e){var t=e.type;return t==="number"||t==="range"}function er(e){return e===""?null:+e}function Kr(e,t){return e===t||(e==null?void 0:e[xt])===t}function Nr(e={},t,n,r){return Va(()=>{var s,a;return An(()=>{s=a,a=[],I(()=>{e!==n(...a)&&(t(e,...a),s&&Kr(n(...s),e)&&t(null,...s))})}),()=>{nn(()=>{a&&Kr(n(...a),e)&&t(null,...a)})}}),e}function Gr(e){return function(...t){var n=t[0];return n.stopPropagation(),e==null?void 0:e.apply(this,t)}}function _i(e){return function(...t){var n=t[0];return n.preventDefault(),e==null?void 0:e.apply(this,t)}}function Lt(e=!1){const t=ee,n=t.l.u;if(!n)return;let r=()=>he(t.s);if(e){let s=0,a={};const o=Sr(()=>{let i=!1;const l=t.s;for(const f in l)l[f]!==a[f]&&(a[f]=l[f],i=!0);return i&&s++,s});r=()=>v(o)}n.b.length&&Ba(()=>{Wr(t,r),Pn(n.b)}),vr(()=>{const s=I(()=>n.m.map(Qs));return()=>{for(const a of s)typeof a=="function"&&a()}}),n.a.length&&vr(()=>{Wr(t,r),Pn(n.a)})}function Wr(e,t){if(e.l.s)for(const n of e.l.s)v(n);t()}function gi(e,t){var a;var n=(a=e.$$events)==null?void 0:a[t.type],r=zn(n)?n.slice():n==null?[]:[n];for(var s of r)s.call(this,t)}function $r(e,t,n){if(e==null)return t(void 0),n&&n(void 0),ct;const r=I(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const qt=[];function wi(e,t){return{subscribe:Mn(e,t).subscribe}}function Mn(e,t=ct){let n=null;const r=new Set;function s(i){if(cs(e,i)&&(e=i,n)){const l=!qt.length;for(const f of r)f[1](),qt.push(f,e);if(l){for(let f=0;f<qt.length;f+=2)qt[f][0](qt[f+1]);qt.length=0}}}function a(i){s(i(e))}function o(i,l=ct){const f=[i,l];return r.add(f),r.size===1&&(n=t(s,a)||ct),i(e),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:s,update:a,subscribe:o}}function Rr(e,t,n){const r=!Array.isArray(e),s=r?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return wi(n,(o,i)=>{let l=!1;const f=[];let c=0,_=ct;const g=()=>{if(c)return;_();const b=t(r?f[0]:f,o,i);a?o(b):_=typeof b=="function"?b:ct},d=s.map((b,A)=>$r(b,p=>{f[A]=p,c&=~(1<<A),l&&g()},()=>{c|=1<<A}));return l=!0,g(),function(){Pn(d),_(),l=!1}})}function pn(e){let t;return $r(e,n=>t=n)(),t}let Nn=!1,_r=Symbol();function Pe(e,t,n){var a;const r=(a=n[t])!=null?a:n[t]={store:null,source:ie(void 0),unsubscribe:ct};if(r.store!==e&&!(_r in n))if(r.unsubscribe(),r.store=e!=null?e:null,e==null)r.source.v=void 0,r.unsubscribe=ct;else{var s=!0;r.unsubscribe=$r(e,o=>{s?r.source.v=o:N(r.source,o)}),s=!1}return e&&_r in n?pn(e):v(r.source)}function Tn(){const e={};function t(){Ar(()=>{for(var n in e)e[n].unsubscribe();rs(e,_r,{enumerable:!1,value:!0})})}return[e,t]}function mi(e){var t=Nn;try{return Nn=!1,[e(),Nn]}finally{Nn=t}}function bn(e,t,n,r){var z,q;var s=!tn||(n&pa)!==0,a=(n&ga)!==0,o=r,i=!0,l=()=>(i&&(i=!1,o=r),o),f;{var c=xt in e||Zs in e;f=(q=(z=Bt(e,t))==null?void 0:z.set)!=null?q:c&&t in e?j=>e[t]=j:void 0}var _,g=!1;[_,g]=mi(()=>e[t]),_===void 0&&r!==void 0&&(_=l(),f&&(s&&ia(),f(_)));var d;if(s?d=()=>{var j=e[t];return j===void 0?l():(i=!0,j)}:d=()=>{var j=e[t];return j!==void 0&&(o=void 0),j===void 0?o:j},s&&!(n&_a))return d;if(f){var b=e.$$legacy;return function(j,G){return arguments.length>0?((!s||!G||b||g)&&f(G?d():j),j):d()}}var A=!1,p=xr(()=>(A=!1,d()));v(p);var m=K;return function(j,G){if(arguments.length>0){const H=G?v(p):s&&a?Ut(j):j;return N(p,H),A=!0,o!==void 0&&(o=H),j}return Pt&&A||m.f&et?p.v:v(p)}}function In(e){ee===null&&Cr(),tn&&ee.l!==null?Ci(ee).m.push(e):vr(()=>{const t=I(e);if(typeof t=="function")return t})}function yi(e){ee===null&&Cr(),In(()=>()=>I(e))}function bi(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function Ei(){const e=ee;return e===null&&Cr(),(t,n,r)=>{var a;const s=(a=e.s.$$events)==null?void 0:a[t];if(s){const o=zn(s)?s.slice():[s],i=bi(t,n,r);for(const l of o)l.call(e.x,i);return!i.defaultPrevented}return!0}}function Ci(e){var n;var t=e.l;return(n=t.u)!=null?n:t.u={a:[],b:[],m:[]}}const Si="5";var es,ts,ns;typeof window<"u"&&((ns=(ts=(es=window.__svelte)!=null?es:window.__svelte={}).v)!=null?ns:ts.v=new Set).add(Si);Ca();async function it(e,t={},n){return window.__TAURI_INTERNALS__.invoke(e,t,n)}const gr=Mn(null);async function Jn(){const e=pn(gr);if(e)return e;const t=await it("get_config");return gr.set(t),t}async function xi(e){await it("save_config",{config:e}),gr.set(e)}async function ki(e,t){return await it("validate_connection",{serverUrl:e,apiKey:t})}var Ai=$('<p class="first-run-message svelte-anx9w7">Welcome! Please configure your NanoChat server connection.</p>'),Mi=$("<div> </div>"),Ti=$('<p class="first-run-note svelte-anx9w7">You must save valid settings before using the app.</p>'),Ii=$('<button class="close-button svelte-anx9w7">Ã—</button>'),ji=$('<div class="settings-overlay svelte-anx9w7"><div class="settings-modal svelte-anx9w7"><h2 class="svelte-anx9w7">Settings</h2> <!> <form><div class="form-group svelte-anx9w7"><label for="server-url" class="svelte-anx9w7">Server URL</label> <input id="server-url" type="url" placeholder="https://api.example.com" required class="svelte-anx9w7"/></div> <div class="form-group svelte-anx9w7"><label for="api-key" class="svelte-anx9w7">API Key</label> <div class="api-key-input svelte-anx9w7"><input id="api-key" placeholder="Your API key" required class="svelte-anx9w7"/> <button type="button" class="toggle-visibility svelte-anx9w7"> </button></div></div> <!> <div class="button-group svelte-anx9w7"><button type="button" class="btn-secondary svelte-anx9w7"> </button> <button type="submit" class="btn-primary svelte-anx9w7"> </button></div> <!></form> <!></div></div>');function Ni(e,t){ht(t,!1);let n=ie(""),r=ie(""),s=ie(!1),a=ie(!1),o=ie(!1),i=ie(null),l=bn(t,"onClose",8,null),f=bn(t,"isFirstRun",8,!1);In(async()=>{try{const T=await Jn();N(n,T.server_url),N(r,T.api_key)}catch(T){console.error("Failed to load config:",T)}});async function c(){N(a,!0),N(i,null);try{const T={server_url:v(n),api_key:v(r)};await xi(T),N(i,{success:!0,message:"Settings saved successfully!"}),l()&&setTimeout(()=>{var J;return(J=l())==null?void 0:J()},1e3)}catch(T){N(i,{success:!1,message:`Failed to save: ${T}`})}finally{N(a,!1)}}async function _(){N(o,!0),N(i,null);try{await ki(v(n),v(r))&&N(i,{success:!0,message:"Connection successful!"})}catch(T){N(i,{success:!1,message:`Connection failed: ${T}`})}finally{N(o,!1)}}function g(){N(s,!v(s))}Lt();var d=ji(),b=w(d),A=k(w(b),2);{var p=T=>{var J=Ai();x(T,J)};Y(A,T=>{f()&&T(p)})}var m=k(A,2),z=w(m),q=k(w(z),2),j=k(z,2),G=k(w(j),2),H=w(G),M=k(H,2),h=w(M),E=k(j,2);{var C=T=>{var J=Mi();let ne;var U=w(J);se(()=>{ne=Tt(J,1,"test-result svelte-anx9w7",null,ne,{success:v(i).success,error:!v(i).success}),te(U,(v(i),I(()=>v(i).message)))}),x(T,J)};Y(E,T=>{v(i)&&T(C)})}var R=k(E,2),y=w(R),S=w(y),D=k(y,2),L=w(D),Q=k(R,2);{var V=T=>{var J=Ti();x(T,J)};Y(Q,T=>{f()&&T(V)})}var X=k(m,2);{var W=T=>{var J=Ii();Z("click",J,function(...ne){var U;(U=l())==null||U.apply(this,ne)}),x(T,J)};Y(X,T=>{!f()&&l()&&T(W)})}se(()=>{It(H,"type",v(s)?"text":"password"),It(M,"title",v(s)?"Hide":"Show"),te(h,v(s)?"ðŸ‘ï¸":"ðŸ‘ï¸â€ðŸ—¨ï¸"),y.disabled=v(o)||!v(n)||!v(r),te(S,v(o)?"Testing...":"Test Connection"),D.disabled=v(a)||!v(n)||!v(r),te(L,v(a)?"Saving...":"Save")}),pr(q,()=>v(n),T=>N(n,T)),pr(H,()=>v(r),T=>N(r,T)),Z("click",M,g),Z("click",y,_),Z("submit",m,_i(c)),x(e,d),pt()}const $n="Request cancelled";async function $i(e,t){const n=t==null?void 0:t.signal;if(n!=null&&n.aborted)throw new Error($n);const r=t==null?void 0:t.maxRedirections,s=t==null?void 0:t.connectTimeout,a=t==null?void 0:t.proxy,o=t==null?void 0:t.danger;t&&(delete t.maxRedirections,delete t.connectTimeout,delete t.proxy,delete t.danger);const i=t!=null&&t.headers?t.headers instanceof Headers?t.headers:new Headers(t.headers):new Headers,l=new Request(e,t),f=await l.arrayBuffer(),c=f.byteLength!==0?Array.from(new Uint8Array(f)):null;for(const[h,E]of l.headers)i.get(h)||i.set(h,E);const g=(i instanceof Headers?Array.from(i.entries()):Array.isArray(i)?i:Object.entries(i)).map(([h,E])=>[h,typeof E=="string"?E:E.toString()]);if(n!=null&&n.aborted)throw new Error($n);const d=await it("plugin:http|fetch",{clientConfig:{method:l.method,url:l.url,headers:g,data:c,maxRedirections:r,connectTimeout:s,proxy:a,danger:o}}),b=()=>it("plugin:http|fetch_cancel",{rid:d});if(n!=null&&n.aborted)throw b(),new Error($n);n==null||n.addEventListener("abort",()=>void b());const{status:A,statusText:p,url:m,headers:z,rid:q}=await it("plugin:http|fetch_send",{rid:d}),j=()=>it("plugin:http|fetch_cancel_body",{rid:q}),G=async h=>{let E;try{E=await it("plugin:http|fetch_read_body",{rid:q})}catch(S){h.error(S),j();return}const C=new Uint8Array(E),R=C[C.byteLength-1],y=C.slice(0,C.byteLength-1);if(R===1){h.close();return}h.enqueue(y)},H=[101,103,204,205,304].includes(A)?null:new ReadableStream({start:h=>{n==null||n.addEventListener("abort",()=>{h.error($n),j()})},pull:h=>G(h)}),M=new Response(H,{status:A,statusText:p});return Object.defineProperty(M,"url",{value:m}),Object.defineProperty(M,"headers",{value:new Headers(z)}),M}async function Ri(){return(await Jn()).server_url.replace(/\/$/,"")}async function Di(e=!1){const t=new Headers;if(!e){const n=await Jn();n.api_key&&t.set("Authorization",`Bearer ${n.api_key}`)}return t}function Pi(e,t){let n=`API Error: ${e.status} ${e.statusText}`;throw t!=null&&t.error?n=t.error:t!=null&&t.message&&(n=t.message),{message:n,status:e.status}}async function sn(e,t={}){const r=`${await Ri()}${e}`,s=await Di(t.skipAuth);t.headers&&new Headers(t.headers).forEach((o,i)=>s.set(i,o)),t.body&&!(t.body instanceof FormData)&&!s.has("Content-Type")&&s.set("Content-Type","application/json");try{const a=await $i(r,{...t,headers:s});if(!a.ok){let o;try{o=await a.json()}catch{}Pi(a,o)}return a.status===204?{}:await a.json()}catch(a){throw a}}async function Li(e=null,t,n="fuzzy"){const r=new URLSearchParams;return e?r.append("projectId",e):r.append("projectId","null"),sn(`/api/db/conversations?${r.toString()}`)}async function Oi(e){const t=await sn(`/api/db/conversations?id=${e}&t=${Date.now()}`);if(!t||t.length===0||!t[0])throw new Error(`Conversation not found: ${e}`);return t[0]}async function Fi(e){return sn(`/api/db/conversations?id=${e}`,{method:"DELETE"})}const Jr={conversations:[],selectedConversationId:null,isNewChatMode:!1,loading:!1,error:null};function qi(){const{subscribe:e,set:t,update:n}=Mn(Jr);return{subscribe:e,async loadConversations(){n(r=>({...r,loading:!0,error:null}));try{const r=await Li();n(s=>({...s,conversations:r,loading:!1}))}catch(r){const s=r instanceof Error?r.message:"Failed to load conversations";n(a=>({...a,loading:!1,error:s}))}},async deleteConversation(r){try{await Fi(r),n(s=>({...s,conversations:s.conversations.filter(a=>a.id!==r),selectedConversationId:s.selectedConversationId===r?null:s.selectedConversationId}))}catch(s){const a=s instanceof Error?s.message:"Failed to delete conversation";throw n(o=>({...o,error:a})),s}},selectConversation(r){n(s=>({...s,selectedConversationId:r,isNewChatMode:!1}))},addAndSelectConversation(r){n(s=>{const o=s.conversations.some(i=>i.id===r.id)?s.conversations:[r,...s.conversations];return{...s,conversations:o,selectedConversationId:r.id,isNewChatMode:!1}})},startNewChat(){n(r=>({...r,selectedConversationId:null,isNewChatMode:!0}))},clearError(){n(r=>({...r,error:null}))},updateConversation(r){n(s=>({...s,conversations:s.conversations.map(a=>a.id===r.id?r:a)}))},reset(){t(Jr)}}}const Ne=qi(),zs=Rr(Ne,e=>e.conversations.find(t=>t.id===e.selectedConversationId)||null);async function tr(e){return sn(`/api/db/messages?conversationId=${e}&t=${Date.now()}`)}async function Qr(e){return sn("/api/generate-message",{method:"POST",body:JSON.stringify(e)})}const Xr={conversationId:null,messages:[],loading:!1,generating:!1,error:null,initializing:!1};function Hi(){const{subscribe:e,set:t,update:n}=Mn(Xr);let r=null;return{subscribe:e,setNewConversationCallback(s){n(a=>({...a,onNewConversation:s}))},setConversation(s){const a=pn({subscribe:e});a.initializing&&s===a.conversationId||(r&&(clearInterval(r),r=null),n(o=>({...o,conversationId:s,messages:[],loading:!1,generating:!1,error:null,initializing:!1})),s&&this.loadMessages(s))},async loadMessages(s){n(a=>({...a,loading:!0,error:null}));try{const a=await tr(s);n(o=>({...o,conversationId:s,messages:a,loading:!1}))}catch(a){const o=a instanceof Error?a.message:"Failed to load messages";throw n(i=>({...i,loading:!1,error:o})),a}},async sendMessage(s,a){let i=pn({subscribe:e}).conversationId;r&&(clearInterval(r),r=null),n(l=>({...l,generating:!0,error:null}));try{if(i)await Qr({message:s,model_id:a,conversation_id:i}),this.startPolling(i);else{console.log("[Chat] No conversation - using generateMessage to create new conversation");const l=await Qr({message:s,model_id:a});console.log("[Chat] generateMessage response:",JSON.stringify(l,null,2)),i=l.conversation_id,n(_=>({..._,initializing:!0,conversationId:i}));const f=pn({subscribe:e});f.onNewConversation&&f.onNewConversation(i);const c=await tr(i);n(_=>({..._,messages:c})),this.startPolling(i)}}catch(l){const f=l instanceof Error?l.message:"Failed to send message";throw n(c=>({...c,generating:!1,error:f})),l}},startPolling(s){r&&clearInterval(r),console.log("[Chat] Starting polling for conversation:",s);let a=0;const o=180;r=setInterval(async()=>{var i,l,f;a++;try{const[c,_]=await Promise.all([tr(s),Oi(s).catch(p=>(console.warn("[Chat] Conversation not yet available, will retry:",p.message),null))]),g=c.filter(p=>p.role==="assistant"),d=g[g.length-1],b=d&&(d.content||d.contentHtml);if(console.log(`[Chat] Poll #${a}: Total ${c.length}, Assistant ${g.length}, Generating: ${(i=_==null?void 0:_.generating)!=null?i:"unknown"}, Title: "${(l=_==null?void 0:_.title)!=null?l:"New Chat"}"`),console.log("[Chat] Last assistant message:",d?{id:d.id,hasContent:!!d.content,hasHtml:!!d.contentHtml,contentLength:((f=d.content)==null?void 0:f.length)||0}:"None"),n(p=>({...p,messages:c})),_&&Ne.updateConversation(_),_&&!_.generating||b||a>=o){a>=o?console.warn("[Chat] Stopping polling - max attempts reached"):_&&!_.generating?console.log("[Chat] Server finished generation (generating=false). Stopping polling."):b&&console.log("[Chat] Assistant message with content detected. Stopping polling."),n(p=>({...p,generating:!1,initializing:!1})),r&&(clearInterval(r),r=null),Ne.loadConversations();return}}catch(c){console.error("[Chat] Polling error:",c)}},500)},stopPolling(){r&&(clearInterval(r),r=null),n(s=>({...s,generating:!1}))},clearError(){n(s=>({...s,error:null}))},setError(s){n(a=>({...a,error:s}))},reset(){r&&(clearInterval(r),r=null),t(Xr)},clearInitializing(){n(s=>({...s,initializing:!1}))}}}const je=Hi();Rr(je,e=>e.conversationId!==null&&!e.generating);var Ui=$('<div class="loading-state svelte-10jhjw1"><div class="spinner svelte-10jhjw1"></div> <p class="svelte-10jhjw1">Loading conversations...</p></div>'),Bi=$('<div class="error-state svelte-10jhjw1"><p class="error-message svelte-10jhjw1"> </p> <button class="svelte-10jhjw1">Retry</button></div>'),zi=$('<div class="empty-state svelte-10jhjw1"><p class="svelte-10jhjw1">No conversations yet</p> <p class="hint svelte-10jhjw1">Start a new chat to get started</p></div>'),Vi=$('<span class="generating-badge svelte-10jhjw1">Generating...</span>'),Yi=$('<div role="button" tabindex="0"><div class="conversation-content svelte-10jhjw1"><div class="conversation-title svelte-10jhjw1"> </div> <div class="conversation-meta svelte-10jhjw1"><span class="conversation-date"> </span> <!></div></div> <button class="delete-btn svelte-10jhjw1" aria-label="Delete conversation" title="Delete conversation"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button></div>'),Ki=$('<div class="conversations svelte-10jhjw1"></div>'),Gi=$('<div class="modal-overlay svelte-10jhjw1" role="dialog" aria-modal="true" aria-labelledby="delete-dialog-title" tabindex="-1"><div class="modal-content svelte-10jhjw1" role="document"><h3 id="delete-dialog-title" class="svelte-10jhjw1">Delete Conversation</h3> <p class="svelte-10jhjw1">Are you sure you want to delete this conversation? This action cannot be undone.</p> <div class="modal-actions svelte-10jhjw1"><button class="btn-secondary svelte-10jhjw1">Cancel</button> <button class="btn-danger svelte-10jhjw1">Delete</button></div></div></div>'),Wi=$('<div class="conversation-list svelte-10jhjw1"><div class="conversation-list-header svelte-10jhjw1"><h2 class="svelte-10jhjw1">Conversations</h2> <button class="new-chat-btn svelte-10jhjw1" title="New conversation"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-10jhjw1"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> <span>New Chat</span></button></div> <div class="conversation-list-content svelte-10jhjw1"><!></div></div> <!>',1);function Ji(e,t){ht(t,!1);const n=()=>Pe(Ne,"$conversationsStore",r),[r,s]=Tn();let a=ie(!1),o=null;In(async()=>{try{await Ne.loadConversations()}catch(M){console.error("Failed to load conversations on mount:",M)}});function i(M){Ne.selectConversation(M)}function l(M){o=M,N(a,!0)}async function f(){if(o)try{await Ne.deleteConversation(o),N(a,!1),o=null}catch(M){console.error("Delete failed:",M)}}function c(){N(a,!1),o=null}function _(){je.setConversation(null),Ne.startNewChat()}function g(M){const h=new Date(M),C=new Date().getTime()-h.getTime(),R=Math.floor(C/6e4),y=Math.floor(C/36e5),S=Math.floor(C/864e5);return R<1?"Just now":R<60?`${R}m ago`:y<24?`${y}h ago`:S<7?`${S}d ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric"})}Lt();var d=Wi(),b=Ye(d),A=w(b),p=k(w(A),2),m=k(A,2),z=w(m);{var q=M=>{var h=Ui();x(M,h)},j=M=>{var h=Rt(),E=Ye(h);{var C=y=>{var S=Bi(),D=w(S),L=w(D),Q=k(D,2);se(()=>te(L,n().error)),Z("click",Q,()=>Ne.loadConversations()),x(y,S)},R=y=>{var S=Rt(),D=Ye(S);{var L=V=>{var X=zi();x(V,X)},Q=V=>{var X=Ki();yn(X,5,()=>n().conversations,W=>W.id,(W,T)=>{var J=Yi();let ne;var U=w(J),oe=w(U),Se=w(oe),We=k(oe,2),rt=w(We),an=w(rt),on=k(rt,2);{var _t=$e=>{var ln=Vi();x($e,ln)};Y(on,$e=>{v(T).generating&&$e(_t)})}var gt=k(U,2);se($e=>{ne=Tt(J,1,"conversation-item svelte-10jhjw1",null,ne,{selected:n().selectedConversationId===v(T).id}),te(Se,v(T).title||"Untitled Conversation"),te(an,$e)},[()=>g(v(T).createdAt)]),Z("click",gt,Gr(()=>l(v(T).id))),Z("click",J,()=>i(v(T).id)),Z("keydown",J,$e=>$e.key==="Enter"&&i(v(T).id)),x(W,J)}),x(V,X)};Y(D,V=>{n().conversations.length===0?V(L):V(Q,!1)},!0)}x(y,S)};Y(E,y=>{n().error?y(C):y(R,!1)},!0)}x(M,h)};Y(z,M=>{n().loading?M(q):M(j,!1)})}var G=k(b,2);{var H=M=>{var h=Gi(),E=w(h),C=k(w(E),4),R=w(C),y=k(R,2);Z("click",R,c),Z("click",y,f),Z("click",E,Gr(function(S){gi.call(this,t,S)})),Z("keydown",E,S=>S.key==="Escape"&&c()),Z("click",h,c),Z("keydown",h,S=>S.key==="Escape"&&c()),x(M,h)};Y(G,M=>{v(a)&&M(H)})}Z("click",p,_),x(e,d),pt(),s()}async function Qi(e){return sn("/api/db/user-models")}const Zr={models:[],selectedModelId:null,loading:!1,error:null};function Xi(){const{subscribe:e,set:t,update:n}=Mn(Zr);return{subscribe:e,async loadModels(){n(r=>({...r,loading:!0,error:null}));try{const r=await Qi();console.log("[Models] Raw API response:",r);let s=[];Array.isArray(r)?s=r:r&&typeof r=="object"?s=Object.values(r):console.error("[Models] Unexpected API response format:",r),console.log("[Models] Parsed models:",s);const a=s,i=a.find(l=>l.pinned)||a[0];console.log("[Models] Enabled models:",a.length,"Default:",i==null?void 0:i.modelId),n(l=>({...l,models:a,selectedModelId:(i==null?void 0:i.modelId)||null,loading:!1}))}catch(r){console.error("[Models] Load error:",r);const s=r instanceof Error?r.message:"Failed to load models";throw n(a=>({...a,loading:!1,error:s})),r}},selectModel(r){n(s=>({...s,selectedModelId:r}))},clearError(){n(r=>({...r,error:null}))},reset(){t(Zr)}}}const qn=Xi(),Vs=Rr(qn,e=>e.models.find(t=>t.modelId===e.selectedModelId)||null);var Zi=$('<div class="message-body svelte-1ebqwt"><!></div>'),eo=$('<div class="message-body svelte-1ebqwt"> </div>'),to=$('<details class="message-reasoning svelte-1ebqwt"><summary class="svelte-1ebqwt">Reasoning</summary> <div class="reasoning-content svelte-1ebqwt"> </div></details>'),no=$('<img class="attached-image svelte-1ebqwt"/>'),ro=$('<div class="message-attachments svelte-1ebqwt"><div class="attachments-label svelte-1ebqwt">Images:</div> <!></div>'),so=$('<a target="_blank" rel="noopener noreferrer" class="attached-document svelte-1ebqwt"> </a>'),ao=$('<div class="message-attachments svelte-1ebqwt"><div class="attachments-label svelte-1ebqwt">Documents:</div> <!></div>'),io=$('<div><div class="message-avatar svelte-1ebqwt"><span class="avatar-icon"> </span></div> <div class="message-content svelte-1ebqwt"><div class="message-header svelte-1ebqwt"><span class="message-role svelte-1ebqwt"> </span> <span class="message-time svelte-1ebqwt"> </span></div> <!> <!> <!> <!></div></div>');function oo(e,t){ht(t,!1);let n=bn(t,"message",8);function r(C){return new Date(C).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}function s(C){switch(C){case"user":return"You";case"assistant":return"Assistant";case"system":return"System";default:return C}}function a(C){switch(C){case"user":return"ðŸ‘¤";case"assistant":return"ðŸ¤–";case"system":return"âš™ï¸";default:return"ðŸ’¬"}}Lt();var o=io();let i;var l=w(o),f=w(l),c=w(f),_=k(l,2),g=w(_),d=w(g),b=w(d),A=k(d,2),p=w(A),m=k(g,2);{var z=C=>{var R=Zi(),y=w(R);ci(y,()=>(he(n()),I(()=>n().contentHtml))),x(C,R)},q=C=>{var R=eo(),y=w(R);se(()=>te(y,(he(n()),I(()=>n().content)))),x(C,R)};Y(m,C=>{he(n()),I(()=>n().contentHtml)?C(z):C(q,!1)})}var j=k(m,2);{var G=C=>{var R=to(),y=k(w(R),2),S=w(y);se(()=>te(S,(he(n()),I(()=>n().reasoning)))),x(C,R)};Y(j,C=>{he(n()),I(()=>n().reasoning)&&C(G)})}var H=k(j,2);{var M=C=>{var R=ro(),y=k(w(R),2);yn(y,1,()=>(he(n()),I(()=>n().images)),zr,(S,D)=>{var L=no();se(()=>{It(L,"src",(v(D),I(()=>v(D).url))),It(L,"alt",(v(D),I(()=>v(D).fileName||"Attached image")))}),x(S,L)}),x(C,R)};Y(H,C=>{he(n()),I(()=>n().images&&n().images.length>0)&&C(M)})}var h=k(H,2);{var E=C=>{var R=ao(),y=k(w(R),2);yn(y,1,()=>(he(n()),I(()=>n().documents)),zr,(S,D)=>{var L=so(),Q=w(L);se(()=>{var V;It(L,"href",(v(D),I(()=>v(D).url))),te(Q,`ðŸ“„ ${(V=(v(D),I(()=>v(D).fileName||v(D).fileType)))!=null?V:""}`)}),x(S,L)}),x(C,R)};Y(h,C=>{he(n()),I(()=>n().documents&&n().documents.length>0)&&C(E)})}se((C,R,y)=>{i=Tt(o,1,"chat-message svelte-1ebqwt",null,i,{"role-user":n().role==="user","role-assistant":n().role==="assistant"}),te(c,C),te(b,R),te(p,y)},[()=>(he(n()),I(()=>a(n().role))),()=>(he(n()),I(()=>s(n().role))),()=>(he(n()),I(()=>r(n().createdAt)))]),x(e,o),pt()}var lo=$('<span class="spinner svelte-5wsbgm"></span>'),fo=Bs('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-5wsbgm"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>'),co=$('<span class="generating-status svelte-5wsbgm"><span class="spinner-small svelte-5wsbgm"></span> Generating response...</span>'),uo=$('<div><div class="input-wrapper svelte-5wsbgm"><textarea rows="1" class="svelte-5wsbgm"></textarea> <button class="send-button svelte-5wsbgm" title="Send message (Ctrl+Enter)"><!></button></div> <div class="input-footer svelte-5wsbgm"><span class="hint svelte-5wsbgm">Press Ctrl+Enter to send</span> <!></div></div>');function vo(e,t){ht(t,!1);const n=()=>Pe(je,"$chatStore",s),r=()=>Pe(Vs,"$selectedModel",s),[s,a]=Tn();let o=bn(t,"disabled",8,!1),i=bn(t,"placeholder",8,"Type a message...");Ei();let l=ie(""),f=ie();async function c(){const h=v(l).trim();if(!h||o()||n().generating)return;const E=r(),C=(E==null?void 0:E.modelId)||"openai/gpt-oss-120b";N(l,""),g();try{await je.sendMessage(h,C)}catch(R){console.error("Failed to send message:",R)}}function _(h){h.key==="Enter"&&(h.ctrlKey||h.metaKey)&&(h.preventDefault(),c())}function g(){v(f)&&(cr(f,v(f).style.height="auto"),cr(f,v(f).style.height=Math.min(v(f).scrollHeight,200)+"px"))}gn(()=>v(f),()=>{v(f)&&g()}),Mr(),Lt();var d=uo();let b;var A=w(d),p=w(A);Nr(p,h=>N(f,h),()=>v(f));var m=k(p,2),z=w(m);{var q=h=>{var E=lo();x(h,E)},j=h=>{var E=fo();x(h,E)};Y(z,h=>{n(),I(()=>n().generating)?h(q):h(j,!1)})}var G=k(A,2),H=k(w(G),2);{var M=h=>{var E=co();x(h,E)};Y(H,h=>{n(),I(()=>n().generating)&&h(M)})}se(h=>{b=Tt(d,1,"chat-input-container svelte-5wsbgm",null,b,{disabled:o()||n().generating}),It(p,"placeholder",i()),p.disabled=(he(o()),n(),I(()=>o()||n().generating)),m.disabled=h},[()=>(he(o()),n(),v(l),I(()=>o()||n().generating||!v(l).trim()))]),pr(p,()=>v(l),h=>N(l,h)),Z("input",p,g),Z("keydown",p,_),Z("click",m,c),x(e,d),pt(),a()}var ho=$('<span class="spinner-small svelte-10w5eu0"></span> <span>Loading models...</span>',1),po=$('<span class="model-icon svelte-10w5eu0">ðŸ¤–</span> <span class="model-name svelte-10w5eu0"> </span> <span class="provider-badge svelte-10w5eu0"> </span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>',1),_o=$('<span class="model-icon svelte-10w5eu0">âš ï¸</span> <span class="model-name svelte-10w5eu0">No models available</span>',1),go=$('<span class="toggle-count svelte-10w5eu0"> </span>'),wo=$('<span class="pinned-badge svelte-10w5eu0" title="Pinned model">ðŸ“Œ</span>'),mo=Bs('<svg class="check-icon svelte-10w5eu0" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>'),yo=$('<button><div class="model-option-info svelte-10w5eu0"><span class="model-option-name svelte-10w5eu0"> </span> <span class="model-option-provider svelte-10w5eu0"> </span></div> <!> <!></button>'),bo=$('<div class="model-dropdown svelte-10w5eu0"><div class="dropdown-header svelte-10w5eu0"><span class="dropdown-title svelte-10w5eu0">Select Model</span> <button><span class="toggle-icon svelte-10w5eu0">ðŸ“Œ</span> <span class="toggle-text svelte-10w5eu0"> </span> <!></button></div> <div class="dropdown-content svelte-10w5eu0"></div></div>'),Eo=$('<div class="model-selector-error svelte-10w5eu0"><span class="error-icon svelte-10w5eu0">âš ï¸</span> <span> </span></div>'),Co=$('<div class="model-selector svelte-10w5eu0"><button class="model-selector-button svelte-10w5eu0" title="Select AI model"><!></button> <!> <!></div>');function So(e,t){ht(t,!1);const n=()=>Pe(qn,"$modelsStore",s),r=()=>Pe(Vs,"$selectedModel",s),[s,a]=Tn(),o=ie(),i=ie();let l=ie(!1),f=ie(),c=ie(!1);function _(){N(l,!v(l))}function g(y){qn.selectModel(y),N(l,!1)}function d(){N(l,!1)}function b(){N(c,!v(c))}function A(y){v(f)&&!v(f).contains(y.target)&&d()}function p(y){const S=y.split("/");return S[S.length-1]}function m(y){const S=y.split("/")[0];return S.charAt(0).toUpperCase()+S.slice(1)}function z(y,S){return(S?y.filter(L=>L.pinned):y).sort((L,Q)=>{if(L.pinned&&!Q.pinned)return-1;if(!L.pinned&&Q.pinned)return 1;const V=p(L.modelId),X=p(Q.modelId);return V.localeCompare(X)})}gn(()=>(n(),v(c)),()=>{N(o,z(n().models,v(c)))}),gn(()=>n(),()=>{N(i,n().models.filter(y=>y.pinned).length)}),Mr(),Lt();var q=Co();Z("click",ur,A);var j=w(q),G=w(j);{var H=y=>{var S=ho();x(y,S)},M=y=>{var S=Rt(),D=Ye(S);{var L=V=>{var X=po(),W=k(Ye(X),2),T=w(W),J=k(W,2),ne=w(J),U=k(J,2);let oe;se((Se,We)=>{te(T,Se),te(ne,We),oe=Tt(U,0,"dropdown-arrow svelte-10w5eu0",null,oe,{open:v(l)})},[()=>(r(),I(()=>p(r().modelId))),()=>(r(),I(()=>m(r().modelId)))]),x(V,X)},Q=V=>{var X=_o();x(V,X)};Y(D,V=>{r()?V(L):V(Q,!1)},!0)}x(y,S)};Y(G,y=>{n(),I(()=>n().loading)?y(H):y(M,!1)})}var h=k(j,2);{var E=y=>{var S=bo(),D=w(S),L=k(w(D),2);let Q;var V=k(w(L),2),X=w(V),W=k(V,2);{var T=ne=>{var U=go(),oe=w(U);se(()=>{var Se;return te(oe,`(${(Se=(v(c),v(i),n(),I(()=>v(c)?v(i):n().models.length)))!=null?Se:""})`)}),x(ne,U)};Y(W,ne=>{v(i)>0&&ne(T)})}var J=k(D,2);yn(J,5,()=>v(o),ne=>ne.modelId,(ne,U)=>{var oe=yo();let Se;var We=w(oe),rt=w(We),an=w(rt),on=k(rt,2),_t=w(on),gt=k(We,2);{var $e=Je=>{var fn=wo();x(Je,fn)};Y(gt,Je=>{v(U),I(()=>v(U).pinned)&&Je($e)})}var ln=k(gt,2);{var Qn=Je=>{var fn=mo();x(Je,fn)};Y(ln,Je=>{n(),v(U),I(()=>n().selectedModelId===v(U).modelId)&&Je(Qn)})}se((Je,fn)=>{Se=Tt(oe,1,"model-option svelte-10w5eu0",null,Se,{selected:n().selectedModelId===v(U).modelId}),te(an,Je),te(_t,fn)},[()=>(v(U),I(()=>p(v(U).modelId))),()=>(v(U),I(()=>m(v(U).modelId)))]),Z("click",oe,()=>g(v(U).modelId)),x(ne,oe)}),se(()=>{Q=Tt(L,1,"favorites-toggle svelte-10w5eu0",null,Q,{active:v(c)}),It(L,"title",v(c)?"Show all models":"Show favorites only"),te(X,v(c)?"Favorites":"All")}),Z("click",L,b),x(y,S)};Y(h,y=>{v(l),n(),I(()=>v(l)&&n().models.length>0)&&y(E)})}var C=k(h,2);{var R=y=>{var S=Eo(),D=k(w(S),2),L=w(D);se(()=>te(L,(n(),I(()=>n().error)))),x(y,S)};Y(C,y=>{n(),I(()=>n().error)&&y(R)})}Nr(q,y=>N(f,y),()=>v(f)),se(()=>j.disabled=(n(),I(()=>n().loading||n().models.length===0))),Z("click",j,_),x(e,q),pt(),a()}var xo=$('<h2 class="svelte-may7r9"> </h2>'),ko=$('<h2 class="svelte-may7r9">New Chat</h2>'),Ao=$('<div class="loading-state svelte-may7r9"><div class="spinner svelte-may7r9"></div> <p class="svelte-may7r9">Loading messages...</p></div>'),Mo=$('<div class="error-state svelte-may7r9"><p class="error-message svelte-may7r9"> </p> <button class="svelte-may7r9">Retry</button></div>'),To=$('<div class="empty-state svelte-may7r9"><div class="empty-content svelte-may7r9"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="svelte-may7r9"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" class="svelte-may7r9"></path></svg> <h3 class="svelte-may7r9"> </h3> <p class="svelte-may7r9">Start a conversation by typing a message below</p></div></div>'),Io=$('<div class="day-divider svelte-may7r9"><span class="day-label svelte-may7r9"> </span></div>'),jo=$("<!> <!>",1),No=$('<div class="generating-indicator svelte-may7r9"><div class="generating-avatar svelte-may7r9"><span class="svelte-may7r9">ðŸ¤–</span></div> <div class="generating-content svelte-may7r9"><div class="generating-dots svelte-may7r9"><span class="svelte-may7r9"></span> <span class="svelte-may7r9"></span> <span class="svelte-may7r9"></span></div></div></div>'),$o=$('<div class="messages-container svelte-may7r9"><!> <!></div>'),Ro=$('<div class="chat-view svelte-may7r9"><div class="chat-header svelte-may7r9"><div class="chat-title svelte-may7r9"><!></div> <!></div> <!> <!></div>');function Do(e,t){ht(t,!1);const n=()=>Pe(zs,"$selectedConversation",a),r=()=>Pe(je,"$chatStore",a),s=()=>Pe(Ne,"$conversationsStore",a),[a,o]=Tn();let i=ie(),l=!0;function f(){if(l&&v(i)){const h=setTimeout(async()=>{await qs(),v(i)&&cr(i,v(i).scrollTop=v(i).scrollHeight)},100);return()=>clearTimeout(h)}}function c(){if(!v(i))return;const{scrollTop:h,scrollHeight:E,clientHeight:C}=v(i);l=E-h-C<100}In(()=>{var h;qn.loadModels().catch(E=>{console.error("Failed to load models:",E)}),(h=n())!=null&&h.id&&je.setConversation(n().id),je.setNewConversationCallback(E=>{console.log("[ChatView] New conversation created:",E);const C={id:E,title:"New Chat",userId:"",projectId:null,pinned:!1,generating:!0,costUsd:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};Ne.addAndSelectConversation(C)})}),yi(()=>{je.stopPolling()});function _(h){const E=new Date(h);return E.toLocaleDateString("en-US",{month:"short",day:"numeric",year:E.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}function g(h){if(h===0)return!0;const E=new Date(r().messages[h].createdAt),C=new Date(r().messages[h-1].createdAt);return E.toDateString()!==C.toDateString()}gn(()=>(n(),r(),s()),()=>{var h,E;((h=n())==null?void 0:h.id)!==r().conversationId&&((E=n())!=null&&E.id?je.setConversation(n().id):s().isNewChatMode||je.setConversation(null))}),gn(()=>r(),()=>{r().messages.length>0&&f()}),Mr(),Lt();var d=Ro(),b=w(d),A=w(b),p=w(A);{var m=h=>{var E=xo(),C=w(E);se(()=>te(C,(n(),I(()=>n().title||"Untitled Conversation")))),x(h,E)},z=h=>{var E=ko();x(h,E)};Y(p,h=>{n()?h(m):h(z,!1)})}var q=k(A,2);So(q,{});var j=k(b,2);{var G=h=>{var E=Ao();x(h,E)},H=h=>{var E=Rt(),C=Ye(E);{var R=S=>{var D=Mo(),L=w(D),Q=w(L),V=k(L,2);se(()=>te(Q,(r(),I(()=>r().error)))),Z("click",V,()=>je.loadMessages(r().conversationId)),x(S,D)},y=S=>{var D=Rt(),L=Ye(D);{var Q=X=>{var W=To(),T=w(W),J=k(w(T),2),ne=w(J);se(()=>te(ne,n()?"No messages yet":"New conversation")),x(X,W)},V=X=>{var W=$o(),T=w(W);yn(T,3,()=>(r(),I(()=>r().messages)),U=>U.id,(U,oe,Se)=>{var We=jo(),rt=Ye(We);{var an=_t=>{var gt=Io(),$e=w(gt),ln=w($e);se(Qn=>te(ln,Qn),[()=>(v(oe),I(()=>_(v(oe).createdAt)))]),x(_t,gt)};Y(rt,_t=>{he(v(Se)),I(()=>g(v(Se)))&&_t(an)})}var on=k(rt,2);oo(on,{get message(){return v(oe)}}),x(U,We)});var J=k(T,2);{var ne=U=>{var oe=No();x(U,oe)};Y(J,U=>{r(),I(()=>r().generating)&&U(ne)})}Nr(W,U=>N(i,U),()=>v(i)),Z("scroll",W,c),x(X,W)};Y(L,X=>{r(),I(()=>r().messages.length===0)?X(Q):X(V,!1)},!0)}x(S,D)};Y(C,S=>{r(),I(()=>r().error)?S(R):S(y,!1)},!0)}x(h,E)};Y(j,h=>{r(),I(()=>r().loading)?h(G):h(H,!1)})}var M=k(j,2);vo(M,{placeholder:"Type a message..."}),x(e,d),pt(),o()}var Po=$('<div class="loading-screen svelte-1n46o8q"><div class="spinner svelte-1n46o8q"></div> <p class="svelte-1n46o8q">Loading...</p></div>'),Lo=$('<div class="empty-placeholder svelte-1n46o8q"><div class="empty-content svelte-1n46o8q"><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="svelte-1n46o8q"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> <h2 class="svelte-1n46o8q">Welcome to NanoChat Desktop</h2> <p class="svelte-1n46o8q">Select a conversation from the sidebar to get started</p> <button class="settings-btn svelte-1n46o8q"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1n46o8q"><circle cx="12" cy="12" r="3"></circle><path d="M12 1v6m0 6v6m-9-9h6m6 0h6"></path></svg> Settings</button></div></div>'),Oo=$('<div class="app-container svelte-1n46o8q"><aside class="sidebar svelte-1n46o8q"><!></aside> <main class="main-content svelte-1n46o8q"><!></main></div>');function Fo(e,t){ht(t,!1);const n=()=>Pe(zs,"$selectedConversation",a),r=()=>Pe(Ne,"$conversationsStore",a),s=()=>Pe(je,"$chatStore",a),[a,o]=Tn();let i=ie(!1),l=ie(!1),f=ie(!1);async function c(){try{console.log("[App] Loading config...");const m=await Jn();console.log("[App] Config loaded:",m),!m.server_url||!m.api_key?(console.log("[App] Config invalid or first run"),N(f,!0),N(l,!0)):(console.log("[App] Config valid, showing main app"),N(f,!1)),N(i,!0)}catch(m){console.error("[App] Failed to load config:",m),N(f,!0),N(l,!0),N(i,!0)}}In(()=>{console.log("[App] Component mounted"),c()});async function _(){N(l,!1),await c()}function g(){N(l,!0)}Lt();var d=Rt(),b=Ye(d);{var A=m=>{var z=Po();x(m,z)},p=m=>{var z=Rt(),q=Ye(z);{var j=H=>{Ni(H,{get isFirstRun(){return v(f)},onClose:_})},G=H=>{var M=Oo(),h=w(M),E=w(h);Ji(E,{});var C=k(h,2),R=w(C);{var y=D=>{Do(D,{})},S=D=>{var L=Lo(),Q=w(L),V=k(w(Q),6);Z("click",V,g),x(D,L)};Y(R,D=>{n()||r().isNewChatMode||s().generating||s().conversationId?D(y):D(S,!1)})}x(H,M)};Y(q,H=>{v(l)?H(j):H(G,!1)},!0)}x(m,z)};Y(b,m=>{v(i)?m(p,!1):m(A)})}x(e,d),pt(),o()}ri(Fo,{target:document.getElementById("app")});
